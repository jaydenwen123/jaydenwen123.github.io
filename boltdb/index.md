
Table of Contents
=================

* [boltdb源码剖析](#boltdb%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90)
  * [1\.boltdb简要介绍](#1boltdb%E7%AE%80%E8%A6%81%E4%BB%8B%E7%BB%8D)
    * [1\.1 boltdb是什么？](#11-boltdb%E6%98%AF%E4%BB%80%E4%B9%88)
    * [1\.2 为什么要分析boltdb？](#12-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%88%86%E6%9E%90boltdb)
    * [1\.3 boltdb的简单用法](#13-boltdb%E7%9A%84%E7%AE%80%E5%8D%95%E7%94%A8%E6%B3%95)
    * [1\.4 boltdb的整体数据组织结构](#14-boltdb%E7%9A%84%E6%95%B4%E4%BD%93%E6%95%B0%E6%8D%AE%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84)
    * [1\.5 boltdb的黑科技](#15-boltdb%E7%9A%84%E9%BB%91%E7%A7%91%E6%8A%80)
  * [2\.boltdb的核心数据结构分析](#2boltdb%E7%9A%84%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90)
    * [2\.1 boltdb的物理页page结构](#21-boltdb%E7%9A%84%E7%89%A9%E7%90%86%E9%A1%B5page%E7%BB%93%E6%9E%84)
    * [2\.2 元数据页](#22-%E5%85%83%E6%95%B0%E6%8D%AE%E9%A1%B5)
    * [2\.3 空闲列表页](#23-%E7%A9%BA%E9%97%B2%E5%88%97%E8%A1%A8%E9%A1%B5)
    * [2\.4 分支节点页](#24-%E5%88%86%E6%94%AF%E8%8A%82%E7%82%B9%E9%A1%B5)
    * [2\.5 叶子节点页](#25-%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E9%A1%B5)
    * [2\.6 总结](#26-%E6%80%BB%E7%BB%93)
  * [3\.boltdb的b\+树(Bucket、node)分析](#3boltdb%E7%9A%84b%E6%A0%91bucketnode%E5%88%86%E6%9E%90)
    * [3\.1 boltdb的Bucket结构](#31-boltdb%E7%9A%84bucket%E7%BB%93%E6%9E%84)
    * [3\.2 Bucket遍历之Cursor](#32-bucket%E9%81%8D%E5%8E%86%E4%B9%8Bcursor)
      * [3\.2\.1  Cursor结构](#321--cursor%E7%BB%93%E6%9E%84)
      * [3\.2\.2 Cursor对外接口](#322-cursor%E5%AF%B9%E5%A4%96%E6%8E%A5%E5%8F%A3)
      * [3\.2\.3 <strong>Seek(key)实现分析</strong>](#323-seekkey%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
      * [3\.2\.4 <strong>First()、Last()实现分析</strong>](#324-firstlast%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
      * [3\.2\.5 <strong>Next()、Prev()实现分析</strong>](#325-nextprev%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
      * [3\.2\.6 Delete()方法分析](#326-delete%E6%96%B9%E6%B3%95%E5%88%86%E6%9E%90)
    * [3\.3 node节点的相关操作](#33-node%E8%8A%82%E7%82%B9%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C)
      * [3\.3\.1 node节点的定义](#331-node%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%9A%E4%B9%89)
      * [3\.3\.2 node节点和page转换](#332-node%E8%8A%82%E7%82%B9%E5%92%8Cpage%E8%BD%AC%E6%8D%A2)
      * [3\.3\.3 node节点的增删改查](#333-node%E8%8A%82%E7%82%B9%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5)
      * [3\.3\.4 node节点的分裂和合并](#334-node%E8%8A%82%E7%82%B9%E7%9A%84%E5%88%86%E8%A3%82%E5%92%8C%E5%90%88%E5%B9%B6)
    * [3\.4 Bucket的相关操作](#34-bucket%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C)
      * [3\.4\.1 创建一个Bucket](#341-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAbucket)
      * [3\.4\.2 获取一个Bucket](#342-%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AAbucket)
      * [3\.4\.3 删除一个Bucket](#343-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AAbucket)
    * [3\.5 key/value的插入、获取、删除](#35-keyvalue%E7%9A%84%E6%8F%92%E5%85%A5%E8%8E%B7%E5%8F%96%E5%88%A0%E9%99%A4)
      * [3\.5\.1 插入一个key/value对](#351-%E6%8F%92%E5%85%A5%E4%B8%80%E4%B8%AAkeyvalue%E5%AF%B9)
      * [3\.5\.2 获取一个key/value对](#352-%E8%8E%B7%E5%8F%96%E4%B8%80%E4%B8%AAkeyvalue%E5%AF%B9)
      * [3\.5\.3 删除一个key/value对](#353-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AAkeyvalue%E5%AF%B9)
      * [3\.5\.4 遍历Bucket中所有的键值对](#354-%E9%81%8D%E5%8E%86bucket%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E9%94%AE%E5%80%BC%E5%AF%B9)
    * [3\.6 Bucket的页分裂、页合并](#36-bucket%E7%9A%84%E9%A1%B5%E5%88%86%E8%A3%82%E9%A1%B5%E5%90%88%E5%B9%B6)
  * [4\.boltdb事务控制](#4boltdb%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6)
    * [4\.1 boltdb事务简介](#41-boltdb%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B)
    * [4\.2 boltdb事务Tx定义](#42-boltdb%E4%BA%8B%E5%8A%A1tx%E5%AE%9A%E4%B9%89)
    * [4\.3 Begin()实现](#43-begin%E5%AE%9E%E7%8E%B0)
    * [4\.4 Commit()实现](#44-commit%E5%AE%9E%E7%8E%B0)
    * [4\.5 Rollback()实现](#45-rollback%E5%AE%9E%E7%8E%B0)
    * [4\.6 WriteTo()和CopyFile()实现](#46-writeto%E5%92%8Ccopyfile%E5%AE%9E%E7%8E%B0)
    * [4\.7 总结](#47-%E6%80%BB%E7%BB%93)
  * [5\.boltdb DB分析](#5boltdb-db%E5%88%86%E6%9E%90)
    * [5\.1 DB结构](#51-db%E7%BB%93%E6%9E%84)
    * [5\.2 对外接口](#52-%E5%AF%B9%E5%A4%96%E6%8E%A5%E5%8F%A3)
    * [5\.3 Open()实现分析](#53-open%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
    * [5\.4 db\.View()实现分析](#54-dbview%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
    * [5\.5 db\.Update()实现分析](#55-dbupdate%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
    * [5\.6 db\.Batch()实现分析](#56-dbbatch%E5%AE%9E%E7%8E%B0%E5%88%86%E6%9E%90)
    * [5\.7 db\.allocate()和db\.grow()分析](#57-dballocate%E5%92%8Cdbgrow%E5%88%86%E6%9E%90)
    * [5\.8 总结](#58-%E6%80%BB%E7%BB%93)
  * [6\.参考资料](#6%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99)

Created by [gh-md-toc](https://github.com/ekalinin/github-markdown-toc.go)
